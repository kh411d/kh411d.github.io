<!DOCTYPE html> <html lang="en-us"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Zend Lucene, getting document ID after indexing &middot; Khalid Scratch Board </title> <!-- CSS --> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-8671044-1', 'auto'); ga('send', 'pageview'); </script> <script> var cb = function() { var l = document.createElement('link'); l.rel = 'stylesheet'; l.href = '/public/css/all.css'; var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h); }; var gb = function() { var l = document.createElement('link'); l.rel = 'stylesheet'; l.href = 'http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface'; var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h); }; var raf = requestAnimationFrame || mozRequestAnimationFrame || webkitRequestAnimationFrame || msRequestAnimationFrame; if (raf) { raf(cb); raf(gb); } else { window.addEventListener('load', cb); window.addEventListener('load', gb); } </script> </head> <body> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1> <a href="/"> Khalid Scratch Board </a> </h1> <p class="lead">Spontaneously wrote, from me to you to others for everyone â€“ khal.web.id</p> </div> <nav class="sidebar-nav"> <a class="sidebar-nav-item" href="http://about.me/khalidity">About Me</a> </nav> </div> </div> <div class="content container"> <div class="post"> <h1 class="post-title">Zend Lucene, getting document ID after indexing</h1> <span class="post-date">29 Mar 2010</span> <p>Once upon a time I have a problem how to get the ID of the indexed document, I need to delete<br> the document that was not available on the database, apparently the document unique ID cannot<br> be use or kept bcoz, it changed after optimization, so then,</p> <p>the Indexed documents may have two type of id&#39;s, so I put database id on the document;</p> <ol> <li><p>Internal document id returned by $hit-&gt;id and used by</p> <p>lang="php">$index-&gt;getDocument(), $index-&gt;delete()</p></li> </ol> <p>and some other methods.</p> <p>This id _may_ and _will_ be changed while index optimization (or<br> auto-optimization) and can&#39;t be used to refer indexed document.</p> <p>This id also can&#39;t be used in search queries.</p> <ol> <li><p>Some unique (or not unique) value added to document while indexing:<br> ...</p> <p>lang="php"> $doc-&gt;addField(Zend<em>Search</em>Lucene<em>Field::Keyword(&#39;DB</em>id&#39;, $dbId));</p></li> </ol> <p>...</p> <p>This field can be used for searching document:</p> <div class="highlight"><pre><code class="language-" data-lang="">&lt;pre lang="php"&gt;$hits = $index-&gt;find('DB_id:2');
</code></pre></div> <p>or (better) directly retrieving documents:<br> ...</p> <div class="highlight"><pre><code class="language-" data-lang="">&lt;pre lang="php"&gt;
$docIDs = $index-&gt;TermDocs(new Zend_Search_Lucene_Index_Term('2',
'DB_id'));
foreach ($docIDs as $docId) {
$index-&gt;delete($docId);
}
</code></pre></div> </div> <div id="disqus_thread"></div> <script> var disqus_config = function () { this.page.url = 'http://khalidadisendjaja.web.id/2010/03/29/zend-lucene-getting-document-id-after-indexing/'; this.page.identifier = '/2010/03/29/zend-lucene-getting-document-id-after-indexing'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//khalidscratchboard.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> <div class="related"> <h2>Related Posts</h2> <ul class="related-posts"> <li> <h3> <a href="/2016/01/25/nge-mix-android-di-macbookpc/"> Nge-mix Android di Macbook/PC <small>25 Jan 2016</small> </a> </h3> </li> <li> <h3> <a href="/2016/01/13/os-x-el-capitan-taktik-marketing-terbaru-apple/"> OS X El Capitan, taktik marketing terbaru Apple <small>13 Jan 2016</small> </a> </h3> </li> <li> <h3> <a href="/2016/01/11/kopi-kental-manis-team-building-dan-boardgaming/"> Kopi kental manis, Team Building dan Boardgaming <small>11 Jan 2016</small> </a> </h3> </li> </ul> </div> </div> </body> </html>
